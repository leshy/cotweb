"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lsh-foundation"),t=require("path"),n=require("express"),r=require("http"),o=require("engine.io");function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,t}var i=s(t);const c=require("http-errors"),a=i.join(__dirname,"../"),u=async()=>{const{config:t}=await e.appCore.init({name:"cot-websocket",configDir:i.join(a,"config"),verbose:!0,defaultConfig:{}}),s=n(),u=r.createServer(s);s.set("views",i.join(t.rootDir,"web/views")),s.set("view engine","ejs"),s.use(n.json()),s.use(n.urlencoded({extended:!1})),s.use(n.static(i.join(t.rootDir,"web/static"))),s.get("/",(function(e,t,n){t.render("index",{title:"Express"})})),s.use((function(e,t,n){n(c(404))})),s.use((function(n,r,o,s){o.locals.message=n.message,console.log(t),o.locals.error=t.env===e.configSystem.Env.dev?n:{},o.status(n.status||500),o.render("error")})),s.get("/",((e,t)=>{t.send("Hello World!")})),o.attach(u,{}).on("connection",(e=>{console.log("connected"),e.on("message",(t=>{console.log(t),e.on("close",(()=>{}))}))})),u.listen(3001)};u(),exports.init=u;
//# sourceMappingURL=cotwebsocket.cjs.production.min.js.map
